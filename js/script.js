var popup=document.querySelector(".modal-feedback"),openPopupButton=document.querySelector(".button-open"),closePopupButton=popup.querySelector(".button-close"),form=popup.querySelector("form"),your_name=popup.querySelector("[name=your-name]"),mail=popup.querySelector("[name=e-mail]"),isStorageSupport=!0,storage="",text_letter=popup.querySelector("[name=text-letter]");try{storage=localStorage.getItem("your_name"),storage=localStorage.getItem("mail")}catch(e){isStorageSupport=!1}openPopupButton.addEventListener("click",function(e){e.preventDefault(),popup.classList.add("modal--show"),storage?(your_name.value=storage,mail.value=storage,text_letter.focus()):your_name.focus()}),closePopupButton.addEventListener("click",function(){popup.classList.remove("modal--show"),popup.classList.remove("modal-error")}),form.addEventListener("submit",function(e){your_name.value&&mail.value?(isStorageSupport&&localStorage.setItem("your_name",your_name.value),localStorage.setItem("mail",mail.value)):(e.preventDefault(),popup.classList.remove("modal-error"),popup.offsetWidth=popup.offsetWidth,popup.classList.add("modal-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),popup.classList.contains("modal--show")&&(popup.classList.remove("modal--show"),popup.classList.remove("modal-error")))});